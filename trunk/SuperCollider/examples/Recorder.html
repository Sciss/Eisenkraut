<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.47">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ad1d13}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
span.s1 {color: #0000bf}
span.s2 {color: #606060}
span.s3 {color: #000000}
span.s4 {color: #007300}
span.s5 {font: 10.0px Monaco}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1">// lastmod: 03-Jun-08</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">e = <span class="s1">Eisenkraut</span>.default;</p>
<p class="p3">e.connect;</p>
<p class="p3">fork { e.initTree; e.initSwing };</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p3">e.swing.dumpOSC(1);</p>
<p class="p3">e.swing.dumpOSC(0);</p>
<p class="p2"><br></p>
<p class="p1">// WARNING : fails if scsynth wasn't yet booted!</p>
<p class="p2"><br></p>
<p class="p4">// Example of a realtime plug-in:</p>
<p class="p4">// A recorder GUI that let's you</p>
<p class="p4">// record everything that comes out</p>
<p class="p4">// of a certain bus. For simplicity</p>
<p class="p4">// you specify bus index and numChannels</p>
<p class="p4">// manually instead of hooking it</p>
<p class="p4">// up to automatically match the control room's</p>
<p class="p4">// output configuration.</p>
<p class="p4">//<span class="Apple-converted-space"> </span></p>
<p class="p4">// Note that a new menu item appears in</p>
<p class="p4">// Process -&gt; SuperCollider.</p>
<p class="p4">// Choosing this item will execute</p>
<p class="p4">// the populateWindowFunc function</p>
<p class="p4">// below.</p>
<p class="p3">(</p>
<p class="p3"><span class="s1">var</span> headerSuffix, ggTimer, ggChannelOffset, ggNumChannels, channelOffset = 0, numChannels = 2, headerFormat = <span class="s2">"aiff"</span>, ggHeaderFormat, ggSampleFormat, sampleFormat = <span class="s2">"float"</span>, folder, ggFolder, ggFile, file = <span class="s2">""</span>, autoFile = <span class="s1">true</span>, routTimer;</p>
<p class="p2"><br></p>
<p class="p5"><span class="s3">x = </span><span class="s1">EisKPlugIn</span><span class="s3">.new.name_( </span>"Control Room Recorder"<span class="s3"> );</span></p>
<p class="p3">e.addProcessPlugIn( x );</p>
<p class="p3">fork { e.initTree; };</p>
<p class="p2"><br></p>
<p class="p3">headerSuffix<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s1">IdentityDictionary</span>.new;</p>
<p class="p3">headerSuffix.put( <span class="s4">\aiff</span>, <span class="s2">"aif"</span> );</p>
<p class="p3">headerSuffix.put( <span class="s4">\next</span>, <span class="s2">"au"</span> );</p>
<p class="p3">headerSuffix.put( <span class="s4">\wav</span>, <span class="s2">"wav"</span> );</p>
<p class="p3">headerSuffix.put( <span class="s4">\ircam</span>, <span class="s2">"irc"</span> );</p>
<p class="p3">headerSuffix.put( <span class="s4">\raw</span>, <span class="s2">"raw"</span> );</p>
<p class="p2"><br></p>
<p class="p3">folder = <span class="s2">"~/Desktop"</span>.standardizePath ++ <span class="s2">"/"</span>;</p>
<p class="p2"><br></p>
<p class="p3">x.populateWindowFunc = { <span class="s1">arg</span> plug, win;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> flow, gui, headerFormats, sampleFormats;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>(<span class="s2">"win.server.addr : "</span>++win.server.addr).postln;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>gui = <span class="s1">GUI</span>.current;</p>
<p class="p3"><span class="Apple-tab-span">	</span>win.bounds_( win.bounds.resizeTo( 368, 156 ));</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow = <span class="s1">FlowLayout</span>( win.view.bounds );</p>
<p class="p3"><span class="Apple-tab-span">	</span>win.view.decorator = flow;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Folder"</span> );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggFolder = <span class="s1">GUI</span>.dragSink.new( win, <span class="s1">Rect</span>( 0, 0, 280, 20 ))</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.resize_( 2 )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_( folder )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>folder = b.object;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.button.new( win, <span class="s1">Rect</span>( 0, 0, 20, 20 ))</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.resize_( 3 )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"..."</span> ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.use( gui, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.dialog.<span class="s5">savePanel</span>({ <span class="s1">arg</span> path;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggFolder.object = path;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggFolder.doAction;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"File"</span> );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggFile = <span class="s1">GUI</span>.textField.new( win, <span class="s1">Rect</span>( 0, 0, 260, 20 ))</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.resize_( 2 )</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_( file )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.enabled_( autoFile.not )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>file = b.object;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.button.new( win, <span class="s1">Rect</span>( 0, 0, 40, 20 ))</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.resize_( 3 )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"Auto"</span> ], [ <span class="s2">"Auto"</span>, <span class="s1">Color</span>.white, <span class="s1">Color</span>.blue ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( autoFile.binaryValue )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>autoFile = b.value == 1;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggFile.enabled( autoFile.not );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Format"</span> );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>headerFormats = headerSuffix.keys.asArray.performUnaryOp( <span class="s4">\asString</span> ).sort;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggHeaderFormat = <span class="s1">GUI</span>.popUpMenu.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.items_( headerFormats )</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( headerFormats.indexOf( headerFormat ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( headerFormats.collect({ <span class="s1">arg</span> item, idx; if( item == headerFormat, idx, -1 )}).maxItem )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>headerFormat = headerFormats[ b.value ];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>sampleFormats = [ <span class="s2">"int16"</span>, <span class="s2">"int24"</span>, <span class="s2">"int32"</span>, <span class="s2">"float"</span> ];</p>
<p class="p3"><span class="Apple-tab-span">	</span>ggSampleFormat = <span class="s1">GUI</span>.popUpMenu.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.items_( sampleFormats )</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( sampleFormats.indexOf( sampleFormat ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( sampleFormats.collect({ <span class="s1">arg</span> item, idx; if( item == sampleFormat, idx, -1 )}).maxItem )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sampleFormat = sampleFormats[ b.value ];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>~ggSampleFormat = ggSampleFormat;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Bus"</span> );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggChannelOffset = <span class="s1">GUI</span>.numberBox.new( win, <span class="s1">Rect</span>( 0, 0, 36, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_( channelOffset )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>channelOffset = b.value.asInteger;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Chans"</span> );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggNumChannels = <span class="s1">GUI</span>.numberBox.new( win, <span class="s1">Rect</span>( 0, 0, 36, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_( numChannels )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>numChannels = b.value.asInteger;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.shift( 48, 8 );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>~ggRec = <span class="s1">GUI</span>.button.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"Rec"</span> ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> path, target, targetAddAction;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.enabled = <span class="s1">false</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>target<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s1">nil</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>targetAddAction<span class="Apple-tab-span">	</span>= <span class="s4">\addToTail</span>;</p>
<p class="p1"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>folder = "recordings/";</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( autoFile, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>file = <span class="s2">"SC_"</span> ++ <span class="s1">Date</span>.localtime.stamp ++ <span class="s2">"."</span> ++ headerSuffix[ headerFormat.asSymbol ];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggFile.object = file;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>path = folder ++ file;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~buf = <span class="s1">EisKBuffer</span>.alloc( e.scsynth, 65536, numChannels );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~buf.write( path, headerFormat, sampleFormat, 0, 0, <span class="s1">true</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SynthDef</span>( <span class="s2">"simpleRecorder"</span> ++ numChannels, { <span class="s1">arg</span> i_bus, i_buf;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">DiskOut</span>.ar( i_buf, <span class="s1">In</span>.ar( i_bus, numChannels ));<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).send( e.scsynth );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.scsynth.sync;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~node = <span class="s1">Synth</span>( <span class="s2">"simpleRecorder"</span> ++ ~buf.numChannels, [ <span class="s4">\i_buf</span>,<span class="Apple-converted-space">  </span>~buf.bufnum,</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">\i_bus</span>, channelOffset ], target ?? { <span class="s1">RootNode</span>( e.scsynth )}, targetAddAction );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~ggStop.enabled = <span class="s1">true</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>routTimer = fork {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">inf</span>.do({ <span class="s1">arg</span> secs;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggTimer.string_( (secs + 360000).asTimeString.copyToEnd( 1 ));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.wait;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.fork( <span class="s1">AppClock</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>~ggStop = <span class="s1">GUI</span>.button.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"Stop"</span> ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.enabled_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.enabled = <span class="s1">false</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~node.free;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~node = <span class="s1">nil</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>routTimer.stop;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>routTimer = <span class="s1">nil</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( ~buf.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~buf.close({ <span class="s1">arg</span> buf; buf.free; });</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~buf = <span class="s1">nil</span>;<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~ggRec.enabled = <span class="s1">true</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggTimer = <span class="s1">GUI</span>.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 72, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"00:00:00"</span> );</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3">};</p>
<p class="p3">)</p>
</body>
</html>
