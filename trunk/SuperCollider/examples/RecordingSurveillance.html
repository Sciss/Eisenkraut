<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.47">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
span.s1 {color: #0000bf}
span.s2 {color: #000000}
span.s3 {color: #606060}
span.s4 {color: #bf0000}
span.s5 {color: #007300}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1">// last mod: 03-Jun-08</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">e = <span class="s1">Eisenkraut</span>.default;</p>
<p class="p3">e.addr.connect;</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1">// This example will help you to monitor</p>
<p class="p1">// recordings using Eisenkraut's Recorder</p>
<p class="p1">// Dialog. It boots another scsynth</p>
<p class="p1">// server (from sclang) that will be used</p>
<p class="p1">// to play beeping tones whenever the</p>
<p class="p1">// recorded sound transcends a given</p>
<p class="p1">// headroom. This is usefull when you</p>
<p class="p1">// perform your recording and cannot stare</p>
<p class="p1">// at the screen to make sure you don't</p>
<p class="p1">// get a clipped recording</p>
<p class="p1">//</p>
<p class="p1">// NOTE: the Recorder Dialog must be</p>
<p class="p1">// open before executing the code block</p>
<p class="p1">// below!</p>
<p class="p3">(</p>
<p class="p1"><span class="s2">s.options.device=</span><span class="s3">"Mobile I/O 2882 [2600]"</span><span class="s2">;<span class="Apple-tab-span">	</span></span>// use your preferred soundcard here</p>
<p class="p3">s.waitForBoot({</p>
<p class="p3"><span class="Apple-tab-span">	</span>~rout = fork { <span class="s1">var</span> msg, peak;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~amp = 0.2; <span class="s4">// peep volume</span></p>
<p class="p1"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>~headroom = -3; </span>// dBFS (above which we will peep)</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SynthDef</span>( <span class="s5">\peep</span>, { <span class="s1">arg</span> out = 0, freq = 1000, amp = 0.1;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar( out, <span class="s1">SinOsc</span>.ar( freq, mul:</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">EnvGen</span>.ar( <span class="s1">Env</span>.linen( 0.01, 0.5, 0.2 ), levelScale: amp, doneAction: 2 )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).send( s );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sync;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">inf</span>.do({</p>
<p class="p4"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg = e.query( </span>'/doc/active/recorder'<span class="s2">, </span>\headroom<span class="s2"> );</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>peak = msg[0];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( peak.notNil and: { peak &gt; ~headroom }, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">"Peep"</span>.postln;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Synth</span>( <span class="s5">\peep</span>, [ <span class="s5">\amp</span>, ~amp ] );</p>
<p class="p4"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( </span>'/doc/active/recorder'<span class="s2">, </span>\resetHeadroom<span class="s2"> );</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.wait</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>};</p>
<p class="p3">});</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p3">~rout.stop;</p>
</body>
</html>
