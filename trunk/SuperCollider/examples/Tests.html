<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.47">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
span.s1 {color: #0000bf}
span.s2 {color: #007300}
span.s3 {color: #606060}
span.s4 {color: #000000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1">// lastmod: 03-Jun-08</p>
<p class="p2"><br></p>
<p class="p3">e = <span class="s1">Eisenkraut</span>.default;</p>
<p class="p3">e.dumpOSC;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">// This example changes the control room's main volume</p>
<p class="p3">(</p>
<p class="p3"><span class="Apple-tab-span">	</span>fork {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>73.do({ <span class="s1">arg</span> i;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( <span class="s2">'/sc'</span>, <span class="s2">\volume</span>, i.neg.dbamp );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>73.do({ <span class="s1">arg</span> i;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( <span class="s2">'/sc'</span>, <span class="s2">\volume</span>, (72 - i).neg.dbamp );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>}</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1">// This example queries the program version and the number</p>
<p class="p1">// of open documents</p>
<p class="p3">(</p>
<p class="p3">fork {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> msg, rate, num, startIdx, stopIdx;</p>
<p class="p3"><span class="Apple-tab-span">	</span>msg = e.query( <span class="s2">'/main'</span>, <span class="s2">\version</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s3">"Eisenkraut v"</span> ++ msg[ 0 ].round( 0.01 )).inform;</p>
<p class="p3"><span class="Apple-tab-span">	</span>}, {</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"timeout"<span class="s4">.warn;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>msg = e.query( <span class="s2">'/doc'</span>, <span class="s2">\count</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s3">"# of docs = "</span> ++ msg[ 0 ]).inform;</p>
<p class="p3"><span class="Apple-tab-span">	</span>}, {</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"timeout"<span class="s4">.warn;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>});</p>
<p class="p3">};</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1">// The next line opens an audio document</p>
<p class="p3">e.sendMsg( <span class="s2">'/doc'</span>, <span class="s2">\open</span>, <span class="s3">"~/Desktop/*.aif"</span>.standardizePath.pathMatch.choose );</p>
<p class="p1">// Select some timeline span in the first document</p>
<p class="p1"><span class="s4">e.sendMsg( </span><span class="s2">'/doc/index/0/timeline'</span><span class="s4">, </span><span class="s2">\select</span><span class="s4">, 4410, 8820 ); </span>// select 100 to 200 milliseconds (assumes 44.1 kHz)</p>
<p class="p1">// Delete that span</p>
<p class="p5"><span class="s4">e.sendMsg( </span>'/doc/active'<span class="s4">, </span>\delete<span class="s4"> );</span></p>
<p class="p1">// Make document at index 0 the active one</p>
<p class="p5"><span class="s4">e.sendMsg( </span>'/doc/index/0'<span class="s4">, </span>\activate<span class="s4"> );</span></p>
<p class="p1">// Close it</p>
<p class="p5"><span class="s4">e.sendMsg( </span>'/doc/active'<span class="s4">, </span>\close<span class="s4"> );</span></p>
<p class="p2"><br></p>
<p class="p1">// ...or force it to close (will not prompt for confirmation)</p>
<p class="p1"><span class="s4">e.sendMsg( </span><span class="s2">'/doc/active'</span><span class="s4">, </span><span class="s2">\close</span><span class="s4">, </span><span class="s1">true</span><span class="s4"> );<span class="Apple-tab-span">	</span></span>// XXX BUG DOESN'T WORK</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">// Query the active document's name</p>
<p class="p3">(</p>
<p class="p3">fork {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> msg, rate, num, startIdx, stopIdx;</p>
<p class="p3"><span class="Apple-tab-span">	</span>msg = e.query( <span class="s2">'/doc/active'</span>, <span class="s2">\name</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s3">"Name: "</span>++msg[0]).inform;</p>
<p class="p3"><span class="Apple-tab-span">	</span>}, {</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"timeout"<span class="s4">.warn;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>});</p>
<p class="p3">};</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">// Close all docs</p>
<p class="p3">(</p>
<p class="p3">fork {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> msg, num;</p>
<p class="p3"><span class="Apple-tab-span">	</span>msg = e.query( <span class="s2">'/doc'</span>, <span class="s2">\count</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>num = msg[ 0 ];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s3">"# of Docs = "</span>++num).inform;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>num.do({ <span class="s1">arg</span> idx;</p>
<p class="p5"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( </span>'/doc/index/0'<span class="s4">, </span>\close<span class="s4"> );</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>}, {</p>
<p class="p4"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"timeout"<span class="s4">.warn;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>});</p>
<p class="p3">};</p>
<p class="p3">)</p>
</body>
</html>
