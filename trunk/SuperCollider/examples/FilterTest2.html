<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.47">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
span.s1 {color: #0000bf}
span.s2 {color: #606060}
span.s3 {color: #bf0000}
span.s4 {color: #007300}
span.s5 {color: #000000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1">// last mod: 19-May-08</p>
<p class="p2"><br></p>
<p class="p3">(</p>
<p class="p3">e = <span class="s1">Eisenkraut</span>.default;</p>
<p class="p3">e.connect;</p>
<p class="p3">fork { e.initTree; e.initSwing };</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p1">// Example of a realtime plug-in:</p>
<p class="p1">// adding reverberation (GVerb2).</p>
<p class="p1">//</p>
<p class="p1">// WARNING : scsynth must be booted</p>
<p class="p1">// before executing this code!</p>
<p class="p1">//</p>
<p class="p1">// After executing this code,</p>
<p class="p1">// a new menu item appears in</p>
<p class="p1">// Process -&gt; SuperCollider.</p>
<p class="p1">// Choosing this item will execute</p>
<p class="p1">// the populateWindowFunc function</p>
<p class="p1">// below.</p>
<p class="p1">//</p>
<p class="p1">// WARNING : needs some realtime</p>
<p class="p1">// memory, so you should make sure</p>
<p class="p1">// to put Preferences -&gt; Audio -&gt; Advanced -&gt;</p>
<p class="p1">// Realtime Memory to at least 32 MB.</p>
<p class="p3">(</p>
<p class="p3"><span class="s1">var</span> desktopFolder;</p>
<p class="p3">desktopFolder = <span class="s2">"~/Desktop"</span>.standardizePath ++ <span class="s2">"/"</span>;</p>
<p class="p3">x = <span class="s1">EisKPlugIn</span>.new.name_( <span class="s2">"GVerb Filter"</span> );</p>
<p class="p3">e.addProcessPlugIn( x );</p>
<p class="p3">fork { e.initTree; };</p>
<p class="p2"><br></p>
<p class="p3">x.populateWindowFunc = { <span class="s1">arg</span> plug, win;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">var</span> flow, gui, synth, ggBypass, ggRender, ggProgress, roomSize = 30, revTime = 3, outDamping = 0.5, inDamping = 0.5, dryLevel = 0.dbamp, earlyLevel = -6.dbamp, tailLevel = -12.dbamp, revTimeSpec, inDampingSpec, outDampingSpec, roomSizeSpec, levelSpec, threshSpec, lbDryLevel, lbEarlyLevel, lbTailLevel, lbOutDamping, lbRevTime, lbRoomSize, lbInDamping, lbThreshold, fStop, fCreateDef, maxRoomSize = 1000, spread = 15 <span class="s3">/* XXX fixed for now */</span>;</p>
<p class="p2"><br></p>
<p class="p3">try {</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui = <span class="s1">GUI</span>.current;</p>
<p class="p3"><span class="Apple-tab-span">	</span>win.bounds_( win.bounds.resizeTo( 400, 240 ));</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow = <span class="s1">FlowLayout</span>( win.view.bounds );</p>
<p class="p3"><span class="Apple-tab-span">	</span>win.view.decorator = flow;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>roomSizeSpec = <span class="s1">ControlSpec</span>( 1, maxRoomSize, <span class="s4">'exp'</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Room Size"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( roomSizeSpec.unmap( roomSize ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>roomSize = roomSizeSpec.map( b.value );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbRoomSize.string = roomSizeSpec.map( b.value ).round( 0.1 ).asString ++ <span class="s2">" m²"</span>;</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( \roomSize, roomSize );</p>
<p class="p4"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"WARNING: roomSize cannot be modified in realtime.\nPress bypass twice to make the change effective"<span class="s5">.postln;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbRoomSize = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"30 m²"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>revTimeSpec = <span class="s1">ControlSpec</span>( 0.1, 100, <span class="s4">'exp'</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Reverb Time"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( revTimeSpec.unmap( revTime ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>revTime = revTimeSpec.map( b.value );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbRevTime.string = revTimeSpec.map( b.value ).round( 0.1 ).asString ++ <span class="s2">" s"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\revTime</span>, revTime );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbRevTime = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"3 s"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>inDampingSpec = <span class="s1">ControlSpec</span>( 0.0, 1.0, <span class="s4">'lin'</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Input Damping"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( inDampingSpec.unmap( inDamping ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>inDamping = inDampingSpec.map( b.value );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbInDamping.string = (inDampingSpec.map( b.value ).round( 0.01 ) * 100).asString ++ <span class="s2">"%"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\inDamping</span>, inDamping );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbInDamping = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"50%"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>outDampingSpec = <span class="s1">ControlSpec</span>( 0.0, 1.0, <span class="s4">'lin'</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Output Damp."</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( outDampingSpec.unmap( outDamping ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>outDamping = outDampingSpec.map( b.value );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbOutDamping.string = (outDampingSpec.map( b.value ).round( 0.01 ) * 100).asString ++ <span class="s2">"%"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\outDamping</span>, outDamping );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbOutDamping = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"50%"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>levelSpec = <span class="s1">ControlSpec</span>( -<span class="s1">inf</span>, 0, <span class="s4">'db'</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Dry Level"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( levelSpec.unmap( dryLevel.ampdb ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>dryLevel = levelSpec.map( b.value ).dbamp;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbDryLevel.string = levelSpec.map( b.value ).round( 0.1 ).asString ++ <span class="s2">" dB"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\dryLevel</span>, dryLevel );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbDryLevel = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"0 dB"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p4"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( </span>"Early Ref. Lvl"<span class="s5"> );</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( levelSpec.unmap( earlyLevel.ampdb ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>earlyLevel = levelSpec.map( b.value ).dbamp;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbEarlyLevel.string = levelSpec.map( b.value ).round( 0.1 ).asString ++ <span class="s2">" dB"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\earlyLevel</span>, earlyLevel );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbEarlyLevel = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"-6 dB"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s4">\right</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"Reverb Level"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>gui.slider.new( win, <span class="s1">Rect</span>( 0, 0, 240, 20 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( levelSpec.unmap( tailLevel.ampdb ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tailLevel = levelSpec.map( b.value ).dbamp;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lbTailLevel.string = levelSpec.map( b.value ).round( 0.1 ).asString ++ <span class="s2">" dB"</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set( <span class="s4">\tailLevel</span>, tailLevel );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>lbTailLevel = gui.staticText.new( win, <span class="s1">Rect</span>( 0, 0, 48, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( <span class="s2">"-12 dB"</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.nextLine;</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>flow.shift( 8, 8 );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>fStop = {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.free;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth = <span class="s1">nil</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>fCreateDef = { <span class="s1">arg</span> numChannels;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SynthDef</span>( <span class="s4">\filterGVerb</span>, { <span class="s1">arg</span> bus = 0, roomSize = 30, revTime = 3, outDamping = 0.5, inDamping = 0.5, spread = 15, dryLevel = 0, earlyLevel = 0.5, tailLevel = 0.25;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> inp, filter;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>inp <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s1">In</span>.ar( bus, numChannels ).asArray;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>filter<span class="Apple-tab-span">	</span>= 0;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>numChannels.do({ <span class="s1">arg</span> ch;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>filter = filter + <span class="s1">GVerb</span>.ar( inp[ ch ], roomSize, revTime, outDamping, inDamping, spread, dryLevel, earlyLevel, tailLevel, maxRoomSize );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">ReplaceOut</span>.ar( bus, filter );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggBypass = gui.button.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"Bypass"</span> ], [ <span class="s2">"Bypass"</span>, <span class="s1">Color</span>.black, <span class="s1">Color</span>.yellow ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.value_( 1 )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( b.value == 0, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> msg, grpInput, diskBus, localThresh, localFFTSize, def;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg = e.query( </span>'/doc/active/sc'<span class="s5">, [ </span>\diskBusIndex<span class="s5">, </span>\diskBusNumChannels<span class="s5">, </span>\inputGroup<span class="s5"> ]);</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>diskBus <span class="Apple-tab-span">	</span>= <span class="s1">Bus</span>( <span class="s4">\audio</span>, msg[ 0 ], msg[ 1 ], e.scsynth );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>grpInput<span class="Apple-tab-span">	</span>= <span class="s1">Group</span>.basicNew( e.scsynth, msg[ 2 ]);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>def = fCreateDef.value( diskBus.numChannels );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth = <span class="s1">Synth</span>.basicNew( def.name, e.scsynth );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>def.send( e.scsynth, synth.newMsg( grpInput, [ <span class="s4">\bus</span>, diskBus.index, <span class="s4">\roomSize</span>, roomSize, <span class="s4">\revTime</span>, revTime, <span class="s4">\outDamping</span>, outDamping, <span class="s4">\inDamping</span>, inDamping, <span class="s4">\spread</span>, spread, <span class="s4">\dryLevel</span>, dryLevel, <span class="s4">\earlyLevel</span>, earlyLevel, <span class="s4">\tailLevel</span>, tailLevel ], <span class="s4">\addAfter</span> ));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.fork( <span class="s1">AppClock</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fStop.value;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span>ggBypass.onClose = fStop; <span class="s3">// XXX NEVER GETS CALLED</span></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggRender = gui.button.new( win, <span class="s1">Rect</span>( 0, 0, 80, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[ <span class="s2">"Render"</span> ]])</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s1">arg</span> b;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> msg, msg2, msg3, oscFileName, oscFile, fna, audioFileName, numChannels, rate, totalLen, cmd, prog, newProg,</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">    </span>localThresh, def, oscFileName2, oscRaw;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= e.sendMsgSync( <span class="s4">'/main'</span>, <span class="s4">\createTempFile</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg2<span class="Apple-tab-span">	</span>= e.sendMsgSync( <span class="s4">'/main'</span>, <span class="s4">\createTempFile</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg3<span class="Apple-tab-span">	</span>= e.sendMsgSync( <span class="s4">'/main'</span>, <span class="s4">\createTempFile</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( msg.notNil &amp;&amp; msg2.notNil &amp;&amp; msg3.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFileName = msg.first;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFileName2 = msg2.first;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>audioFileName = msg3.first;</p>
<p class="p5"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg = e.query( </span>'/doc/active/sc'<span class="s5">, [ </span>\diskBusNumChannels<span class="s5"> ]);</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>numChannels = msg.first;</p>
<p class="p5"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>msg = e.query( </span>'/doc/active/timeline'<span class="s5">, [ </span>\rate<span class="s5">, </span>\selectionStart<span class="s5">, </span>\selectionStop<span class="s5"> ]);</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( msg.notNil, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>rate = msg[ 0 ];</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>totalLen = (msg[ 2 ] - msg[ 1 ]) / rate;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(oscFileName.asString.asCompileString ++ <span class="s2">" (numCh = "</span>++numChannels++<span class="s2">"; rate = "</span>++rate++<span class="s2">"; duration = "</span>++totalLen++<span class="s2">") --&gt; "</span> ++ audioFileName).postln;</p>
<p class="p4"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"Creating NRT file..."<span class="s5">.postln;</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( <span class="s4">'/doc/active/sc'</span>, <span class="s4">\createNRTFile</span>, oscFileName, 0, 0, numChannels, rate );</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[ "oscFileName", oscFileName, "oscFileName2", oscFileName2 ].postcs;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">// XXX BROKEN</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sync;</p>
<p class="p3">e.query( <span class="s4">'/main'</span>, [ <span class="s4">\version</span> ]);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"...done"</span>.postln;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.0.wait;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"Reading NRT file...".postln;</p>
<p class="p1">//</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFile = OSCFile.read( oscFileName );</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"...done".postln;</p>
<p class="p1">//</p>
<p class="p4"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"Creating merged NRT file..."<span class="s5">.postln;</span></p>
<p class="p1">// oscFileName2="/tmp/test.osc";</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna = <span class="s1">EisKNRTFile</span>.openWrite( oscFileName2.asString );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"-----------3"</span>.postln;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>def = fCreateDef.value( numChannels );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth = <span class="s1">Synth</span>.basicNew( def.name, e.scsynth );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna.sendBundle( 0.0, def.recvMsg );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna.sendBundle( 0.0, synth.newMsg( <span class="s1">Group</span>.basicNew( e.scsynth, 0 ), [ <span class="s4">\threshold</span>, localThresh, <span class="s4">\bus</span>, 0 ], <span class="s4">\addToTail</span> ));</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"-----------4".postln;</p>
<p class="p1">//("cp " ++ oscFileName ++ " /tmp/test2.osc").systemCmd;</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"-----------4.5".postln;</p>
<p class="p1">//oscFileName = "/tmp/test2.osc";</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFile = <span class="s1">File</span>( oscFileName.asString, <span class="s2">"rb"</span> );</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"-----------5".postln;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscRaw = <span class="s1">Int8Array</span>.newClear( oscFile.length );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFile.read( oscRaw );</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"-----------6".postln;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFile.close;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna.file.write( oscRaw );</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>"-----------7".postln;</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>oscFile.packets.do({ arg p;</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna.sendRaw( p.asRawOSC );</p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fna.closeFile;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"...done"</span>.postln;</p>
<p class="p1">// audioFileName = desktopFolder ++ "test.aif";</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>cmd = <span class="s2">"./scsynth -i 0 -o "</span>++numChannels++<span class="s2">" -N "</span> ++ oscFileName2 ++ <span class="s2">" _ "</span> ++ audioFileName ++ <span class="s2">" "</span>++rate++<span class="s2">" AIFF float"</span>;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.knobColor_( <span class="s1">Color</span>.blue( 0.3 ));</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.hi = 0.0;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>prog = 0.0;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.visible = <span class="s1">true</span>;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Pipe</span>.do( cmd, { <span class="s1">arg</span> line, i;</p>
<p class="p1">//line.postcs;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( line.beginsWith( <span class="s2">"nextOSCPacket "</span> ), {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>newProg = line.copyToEnd( 14 ).asFloat / totalLen;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( (newProg - prog) &gt; 0.01, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>prog = newProg;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.hi = newProg;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>line.postln;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.hi = 1.0;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ggProgress.knobColor = <span class="s1">Color</span>.green( 0.75 );</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( '/doc/active', \editMode, \overwrite );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>e.sendMsg( <span class="s4">'/doc/active'</span>, <span class="s4">\replace</span>, audioFileName );</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"timeout"</span>.warn;<span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"timeout"</span>.warn;<span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">"timeout"</span>.warn;<span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.fork( <span class="s1">AppClock</span> );</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span>ggProgress = <span class="s1">GUI</span>.rangeSlider.new( win, <span class="s1">Rect</span>( 0, 0, 172, 24 ))</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s1">false</span> )</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.visible_( <span class="s1">false</span> );</p>
<p class="p3">} { <span class="s1">arg</span> error;</p>
<p class="p3"><span class="Apple-tab-span">	</span>error.reportError;</p>
<p class="p3">};</p>
<p class="p2"><br></p>
<p class="p3">};</p>
<p class="p3">)</p>
</body>
</html>
